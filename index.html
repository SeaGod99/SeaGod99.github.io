<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FFXIV 即時市場查詢工具">
    <meta name="keywords" content="FFXIV,最終幻想,市場,Universalis">
    <title>FFXIV 市場查詢工具</title>
    <link rel="stylesheet" href="assets/css/jquery-ui.min.css">
    <link rel="stylesheet" href="assets/css/jquery-ui.structure.min.css">
    <link rel="stylesheet" href="assets/css/jquery-ui.theme.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="page-container">
        <!-- 頁面頭部 -->
        <header class="page-header">
            <h1>⚔️ FFXIV 市場查詢</h1>
            <p>即時查詢最終幻想 XIV 市場板價格和數據</p>
            <div class="server-badge">
                <span id="serverBadge">未選擇伺服器</span>
                <span id="languageBadge"></span>
                <a href="javascript:resetServerSelection()" class="badge-link">切換</a>
            </div>
        </header>

        <!-- 主內容區 -->
        <main class="main-content">
            <!-- 左側欄：查詢面板 -->
            <div class="sidebar sidebar-left">
                <!-- 數據中心和伺服器選擇 -->
                <section class="panel" id="serverSelectPanel">
                    <div class="panel-header">
                        <h3>🌍 伺服器選擇</h3>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label for="dcSelect">數據中心</label>
                            <select id="dcSelect" class="form-control">
                                <option value="">-- 選擇數據中心 --</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="worldSelect">伺服器</label>
                            <select id="worldSelect" class="form-control" disabled>
                                <option value="">-- 先選擇數據中心 --</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="languageSelect">搜尋語言</label>
                            <select id="languageSelect" class="form-control">
                                <option value="tc" selected>繁體中文</option>
                                <option value="en">English (英文)</option>
                            </select>
                            <small class="form-text">選擇搜尋時使用的語言</small>
                        </div>

                        <button id="confirmBtn" class="btn btn-primary btn-block" disabled>
                            ✓ 確認伺服器
                        </button>
                    </div>
                </section>


                <!-- 物品搜尋 -->
                <section class="panel" id="searchPanel" style="display: none;">
                    <div class="panel-header">
                        <h3>🔍 物品搜尋</h3>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label for="searchQuery">物品名稱</label>
                            <div class="input-group">
                                <input type="text" id="searchQuery" class="form-control" placeholder="輸入物品名稱搜尋...">
                                <button class="btn btn-primary btn-small" onclick="searchItemByName()">搜尋</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 物品 ID 查詢 - 已停用 -->
                <section class="panel" id="idSearchPanel" style="display: none;">
                </section>
            </div>

            <!-- 右側欄：結果展示 -->
            <div class="sidebar sidebar-right">
                <!-- 搜尋結果卡 -->
                <section class="panel" id="searchResultsPanel" style="display: none;">
                    <div class="panel-header">
                        <h3>🔍 搜尋結果</h3>
                        <button class="btn-close" onclick="clearSearchResults()">×</button>
                    </div>
                    <div class="panel-body">
                        <div id="searchResultsHeader" class="results-header">
                            <span>找到 <strong id="resultCount">0</strong> 個物品</span>
                        </div>
                        <div id="jobFilterContainer" class="job-filter-container">
                            <label>職業篩選</label>
                            <div id="jobFilterButtons" class="job-filter-buttons"></div>
                        </div>
                        <div id="resultsList" class="results-list"></div>
                    </div>
                </section>

                <!-- 物品信息卡 -->
                <section class="panel" id="itemInfoPanel" style="display: none;">
                    <div class="panel-header">
                        <h3 id="itemTitle">物品信息</h3>
                        <button class="btn-close" onclick="clearItemInfo()">×</button>
                    </div>
                    <div class="panel-body">
                        <div id="itemInfoContent" class="item-info"></div>
                    </div>
                </section>

                <!-- 價格信息卡 -->
                <section class="panel" id="pricePanel" style="display: none;">
                    <div class="panel-header">
                        <h3>📊 價格信息</h3>
                    </div>
                    <div class="panel-body">
                        <div id="priceContent" class="price-grid"></div>
                    </div>
                </section>

                <!-- 合成表卡 -->
                <section class="panel" id="craftPanel" style="display: none;">
                    <div class="panel-header">
                        <h3>🔨 合成表</h3>
                    </div>
                    <div class="panel-body">
                        <div id="craftContent" class="recipes-container"></div>
                    </div>
                </section>

                <!-- 製造成本卡 -->
                <section class="panel" id="craftingCostPanel" style="display: none;">
                    <div class="panel-header">
                        <h3>💰 製造成本計算</h3>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label for="craftQuantity">製造數量</label>
                            <input type="number" id="craftQuantity" class="form-control" value="1" min="1">
                        </div>
                        <button class="btn btn-primary btn-block" onclick="calculateCraftingCost()">
                            計算成本
                        </button>
                        <div id="craftingCostContent" style="margin-top: 1rem;"></div>
                    </div>
                </section>
            </div>
        </main>

        <!-- 加載指示器 -->
        <div id="globalLoading" class="loading-overlay" style="display: none;">
            <div>
                <div class="spinner"></div>
                <p>查詢中...</p>
            </div>
        </div>

        <!-- 全局消息提示 -->
        <div id="messageContainer" class="message-container"></div>
    </div>

    <!-- 腳部 -->
    <footer class="page-footer">
        <p>© 2026 FFXIV 市場查詢工具 | 由 Universalis API 提供數據</p>
        <p><small>此工具與 Square Enix 無關。FINAL FANTASY XIV © Square Enix</small></p>
    </footer>a

    <!-- jQuery -->
    <script src="assets/js/jquery-4.0.0.min.js"></script>
    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/script.js"></script>
</body>

</html>